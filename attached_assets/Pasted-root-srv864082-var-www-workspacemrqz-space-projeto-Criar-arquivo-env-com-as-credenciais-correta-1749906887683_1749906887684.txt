root@srv864082:/var/www/rotacaicara.com.br/projeto# # Criar arquivo .env com as credenciais corretas
cat > .env << 'ENV_EOF'
SESSION_SECRET=H5xK+M8kdvqOZC1inQVrVhkfIJvaCLgsNtECq8CyZrX0gcUjLuEVild3OGyMjTGlITPUpftb6iGjVKLncddv1g==
PGUSER=neondb_owner
PGPASSWORD=npg_q9pCnLTuYo6l
DATABASE_URL=postgresql://neondb_owner:npg_q9pCnLTuYo6l@ep-long-feather-acf901dd-pooler.sa-east-1.aws.neon.tech/neondb?sslmode=require
PGDATABASE=neondb
PGHOST=ep-long-feather-acf901dd-pooler.sa-east-1.aws.neon.tech
PGPORT=5432
REPL_ID=rotacaicara
ISSUER_URL=https://replit.com/oidc
REPLIT_DOMAINS=rotacaicara.com.br,www.rotacaicara.com.br
ENV_EOF

# Instalar dependências
npm install

# Executar migrações do banco
npm run db:push -- --force

# Compilar projeto para produção
npm run build
npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is

added 511 packages, and audited 512 packages in 7s

68 packages are looking for funding
  run `npm fund` for details

8 vulnerabilities (1 low, 7 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

> rest-express@1.0.0 db:push
> drizzle-kit push --force

No config path provided, using default 'drizzle.config.ts'
Reading config file '/var/www/rotacaicara.com.br/projeto/drizzle.config.ts'
Using 'pg' driver for database querying
[✓] Pulling schema from database...
+ admin_logs table will be created
+ analytics table will be created
+ banners table will be created
+ business_registrations table will be created
+ faqs table will be created
+ news table will be created
+ promotions table will be created
+ testimonials table will be created
--- all table conflicts resolved ---


+ background_image column will be created

+ active column will be created
--- all columns conflicts in categories table resolved ---


+ category_id column will be created

+ image_url column will be created

+ certified column will be created

+ active column will be created
--- all columns conflicts in businesses table resolved ---


+ site_name column will be created

+ headline1 column will be created

+ headline2 column will be created

+ headline3 column will be created

+ headline4 column will be created

+ tagline1 column will be created

+ tagline2 column will be created

+ tagline3 column will be created

+ tagline4 column will be created

+ phone column will be created

+ email column will be created

+ address column will be created

+ logo_url column will be created

+ instagram_url column will be created

+ whatsapp_url column will be created

+ facebook_url column will be created

+ footer_description column will be created

+ advertise_headline column will be created

+ advertise_subtitle1 column will be created

+ advertise_subtitle2 column will be created

+ faq1_question column will be created

+ faq1_answer column will be created

+ faq2_question column will be created

+ faq2_answer column will be created

+ faq3_question column will be created

+ faq3_answer column will be created

+ faq4_question column will be created

+ faq4_answer column will be created

+ updated_at column will be created
--- all columns conflicts in site_settings table resolved ---








· You're about to add categories_slug_unique unique constraint to the table, which contains 14 items. If this statement fails, you will receive an error from the database. Do you want to truncate categories tabl
e?















[✓] Changes applied

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.14 building for production...
transforming (4) src/App.tsxBrowserslist: browsers data (caniuse-lite) is 8 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme

/images/global-bg.svg referenced in /images/global-bg.svg didn't resolve at build time, it will remain unchanged to be resolved at runtime
✓ 2186 modules transformed.
../dist/public/index.html                   0.87 kB │ gzip:   0.51 kB
../dist/public/assets/index-D-VrcKeP.css   77.30 kB │ gzip:  13.82 kB
../dist/public/assets/index-hQuVcphc.js   675.45 kB │ gzip: 204.92 kB

(!) Some chunks are larger than 500 kB after minification. Consider:
- Using dynamic import() to code-split the application
- Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
- Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
✓ built in 4.99s
▲ [WARNING] Duplicate key "tagline1" in object literal [duplicate-object-key]

    server/storage.ts:403:6:
      403 │       tagline1: "Descubra os melhores negócios da sua região",
          ╵       ~~~~~~~~

  The original key "tagline1" is here:

    server/storage.ts:393:6:
      393 │       tagline1: "Conectando você aos melhores negócios da cidade",
          ╵       ~~~~~~~~

1 warning

  dist/index.js  50.3kb

⚡ Done in 6ms
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 
root@srv864082:/var/www/rotacaicara.com.br/projeto# 